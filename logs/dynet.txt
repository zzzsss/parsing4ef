How to build with cuda and mkl:

[plain/cuda]
git clone https://github.com/clab/dynet.git
hg clone https://bitbucket.org/eigen/eigen/
cd dynet/
mkdir build
cd build
cmake .. -DEIGEN3_INCLUDE_DIR=../eigen -DBACKEND=cuda
make -j 2

[mkl]
cmake .. -DEIGEN3_INCLUDE_DIR=../eigen -DCMAKE_CXX_FLAGS=-DEIGEN_USE_MKL_ALL -DLIBS='-lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread'

[on order machine]
cmake .. -DEIGEN3_INCLUDE_DIR=../eigen -DCMAKE_CXX_COMPILER=g++-4.8 -DCMAKE_C_COMPILER=gcc-4.8


g++-4.9 -I /home/zhangzs/bin/dynet/ -I /home/zhangzs/bin/eigen/ -std=c++11 src/*/*.cpp src/main.cpp -L /home/zhangzs/bin/dynet/build-mkl/dynet/ -ldynet -lboost_regex -lboost_program_options -lboost_serialization -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread 
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/zhangzs/bin/dynet/build-mkl/dynet/ ../../ef/a.out


g++-4.9 -I /home/zhangzs/bin/dynet/ -I /home/zhangzs/bin/eigen/ -std=c++11 /home/zhangzs/bin/dynet/dynet/[^c]*.cc /home/zhangzs/bin/dynet/dynet/cf*.cc src/*/*.cpp src/main.cpp -lboost_regex -lboost_program_options -lboost_serialization

commit d6f5071cba86c98f520cfe9c27bc5f4a0879f850
Date:   Mon Oct 10 22:12:13 2016 -0400
https://github.com/clab/dynet/commit/d6f5071cba86c98f520cfe9c27bc5f4a0879f850

=========
fixes for dynet:
1. Reshape that supports_multibatch. (note: this has been fixed in the new version of dynet)
2. delete nodes for checkpoint/revert
3. cg->ee->invalidate(): num_nodes_evaluated should be init to 0. (this has problem only on some machines)
